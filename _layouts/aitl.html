<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <title>{{ page.title | default: site.title }}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="color-scheme" content="light" />

  <!-- ポータル共通CSS（常に最新を読む） -->
  <link rel="stylesheet"
        href="{{ '/assets/css/style.css' | relative_url }}?v={{ site.time | date: '%s' }}" />
  <!-- （任意）SEOタグ -->
  {%- if site.plugins contains "jekyll-seo-tag" -%}{% seo %}{%- endif -%}

  <!-- 最小限のページ専用補助だけ（幅・Mermaid中央寄せ） -->
  <style>
    .page-content { max-width: 980px; margin: 16px auto; padding: 0 14px; }
    .markdown-body { font: inherit; line-height: inherit; } /* GitHub風クラス対策 */
    .mermaid { display:block; margin:1.5rem auto; max-width:960px; text-align:center; }
  </style>

  <!-- Mermaid（図） -->
  <script defer src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
</head>

<!-- ★ ポータル統一デザイン：セピア固定 -->
<body class="theme-sepia">
  <main class="page-content">
    {{ content }}
  </main>

  <!-- ```mermaid → <div.mermaid> 置換 + ライト固定 -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      document.querySelectorAll('code.language-mermaid').forEach(function (code) {
        const pre = code.closest('pre');
        const div = document.createElement('div');
        div.className = 'mermaid';
        div.textContent = code.textContent;
        (pre || code).replaceWith(div);
      });
      if (window.mermaid) {
        mermaid.initialize({ startOnLoad: true, securityLevel: 'loose', theme: 'default' });
      }
    });
  </script>
</body>
</html>
