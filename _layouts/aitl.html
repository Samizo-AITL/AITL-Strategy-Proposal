<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>{{ page.title | default: site.title }}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- （任意）Noto Sans JP を確実に使いたい場合は有効化
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;600;700&display=swap" rel="stylesheet">
  -->

  <style>
    /* ===== Base ===== */
    :root { --text:#111; --bg:#fff; --link:#0b3d75; }

    /* ここで全ページのフォントを統一 */
    html, body {
      margin:0; padding:0;
      background:var(--bg); color:var(--text);
      font-family:
        -apple-system, BlinkMacSystemFont, "Segoe UI",
        "Noto Sans JP", "Hiragino Kaku Gothic ProN", "Hiragino Kaku Gothic Pro",
        "Yu Gothic UI", "Yu Gothic", "Meiryo",
        "Helvetica Neue", Arial, sans-serif;
      font-weight: 400;
      line-height: 1.7;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    /* GitHub風のMarkdownクラスが付く場合も同じフォントで統一 */
    .markdown-body { font-family: inherit; line-height: inherit; }

    .page-content { max-width:980px; margin:16px auto; padding:0 14px; }

    /* 見出しはフォントを継承して太字だけ指定 */
    h1, h2, h3 {
      line-height: 1.3;
      margin: 1rem 0 .6rem;
      font-weight: 700;
    }

    a { color: var(--link); text-decoration: none; }
    a:hover { text-decoration: underline; }
    img { max-width:100%; height:auto; }

    /* ===== Tables: 枠線を必ず表示 ===== */
    table { border-collapse: collapse; width: 100%; margin: .8rem 0; }
    th, td {
      border: 1px solid #8aa9c9;
      padding: 6px 10px;
      vertical-align: top;
    }
    th {
      background: #eef5fb;
      font-weight: 700;
      white-space: nowrap;
      text-align: left;
    }

    /* 等幅フォント（コード）も統一 */
    code, pre, kbd, samp {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
                   "Liberation Mono", "Courier New", monospace;
      font-size: .95em;
    }
    pre { overflow-x:auto; }

    /* Mermaid 図の中央寄せ */
    .mermaid {
      display: block;
      margin: 1.5rem auto;
      max-width: 960px;
      text-align: center;
    }

    @media (max-width:640px){
      th, td { padding: 6px 8px; }
    }
    @media print {
      thead { display: table-header-group; }
      tr, img, table, pre { break-inside: avoid; page-break-inside: avoid; }
    }
  </style>

  <!-- Mermaid（Pagesで動作） -->
  <script defer src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
</head>
<body>
  <main class="page-content">
    {{ content }}
  </main>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      // 1) ```mermaid を <div class="mermaid"> へ
      document.querySelectorAll('code.language-mermaid').forEach(function (code) {
        const pre = code.closest('pre');
        const div = document.createElement('div');
        div.className = 'mermaid';
        div.textContent = code.textContent;
        (pre || code).replaceWith(div);
      });

      // 2) ライト固定で初期化
      if (window.mermaid) {
        mermaid.initialize({
          startOnLoad: true,
          securityLevel: 'loose',
          theme: 'default'
        });
      }
    });
  </script>
</body>
</html>
